"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[141],{8150:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});var r=n(5671),a=n(3144),o=n(136),c=n(4104),s=n(2791),u=n(9101),i=n(1087),l=n(3008),d="MainNav_phonebookLink__hXPSK",f=n(184),p=(0,u.$j)((function(e){return{isAuthenticated:l.Z.getIsAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return(0,f.jsxs)("nav",{children:[(0,f.jsx)(i.OL,{to:"/",className:d,children:"Home"}),t&&(0,f.jsx)(i.OL,{to:"/contacts",className:d,children:"Contacts"})]})})),h=n(8166),m=n(7902),v="UserMenu_phonebookContainer__Tjn1y",b="UserMenu_userAvatar__SU4tq",g="UserMenu_userName__ezkGV",C="UserMenu_button__97CPT",x={onLogout:m.Z.logoutUser},_=(0,u.$j)((function(e){return{name:l.Z.getUserName(e),avatar:h}}),x)((function(e){var t=e.avatar,n=e.name,r=e.onLogout;return(0,f.jsxs)("div",{className:v,children:[(0,f.jsx)("img",{src:t,alt:"avatar",width:"32",className:b}),(0,f.jsxs)("span",{className:g,children:["Welcome, ",n]}),(0,f.jsx)("button",{className:C,type:"button",onClick:r,children:"LogOut"})]})})),y="AuthNav_phonebookLink__w+twZ",j=function(){return(0,f.jsxs)("div",{children:[(0,f.jsx)(i.OL,{to:"/register",className:y,children:"Register"}),(0,f.jsx)(i.OL,{to:"/login",className:y,children:"LogIn"})]})},Z="AppBar_phonebookHeader__ETS1G",k=(0,u.$j)((function(e){return{isAuthenticated:l.Z.getIsAuthenticated(e)}}),null)((function(e){var t=e.isAuthenticated;return(0,f.jsxs)("header",{className:Z,children:[(0,f.jsx)(p,{}),t?(0,f.jsx)(_,{}):(0,f.jsx)(j,{})]})})),N=n(5861),A=n(7757),w=n.n(A),L=n(8245),E=n(3263);E.Z.defaults.baseURL="https://connections-api.herokuapp.com/";var R=function(){return function(){var e=(0,N.Z)(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L.Z.fetchAllContactsRequest()),e.prev=1,e.next=4,E.Z.get("/contacts");case 4:n=e.sent,t(L.Z.fetchAllContactsSuccess(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(L.Z.fetchAllContactsError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},S=function(e,t){return function(){var n=(0,N.Z)(w().mark((function n(r){var a;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(L.Z.addContactRequest()),n.prev=1,n.next=4,E.Z.post("/contacts",{name:e,number:t});case 4:a=n.sent,r(L.Z.addContactSuccess(a.data)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(L.Z.addContactError(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},z=function(e){return function(){var t=(0,N.Z)(w().mark((function t(n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(L.Z.deleteContactRequest()),t.prev=1,t.next=4,E.Z.delete("/contacts/".concat(e));case 4:n(L.Z.deleteContactSuccess(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(L.Z.deleteContactError(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},F="PhonebookContacts_phonebookContacts__3RRDq",P="PhonebookContacts_title__Rm8Nm",q="PhonebookContacts_subtitle__Y431E",U="PhonebookContacts_contactName__0VxQH",M="PhonebookContacts_border__pZhUz",O="PhonebookContacts_input__EoTmJ",D="PhonebookContacts_label__Frabz",T="PhonebookContacts_button__MZI95",$="NOT_FOUND";var I=function(e,t){return e===t};function B(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,a=void 0===r?I:r,o=n.maxSize,c=void 0===o?1:o,s=n.resultEqualityCheck,u=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}}(a),i=1===c?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:$},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(u):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var a=n[r];return r>0&&(n.splice(r,1),n.unshift(a)),a.value}return $}return{get:r,put:function(t,a){r(t)===$&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(c,u);function l(){var t=i.get(arguments);if(t===$){if(t=e.apply(null,arguments),s){var n=i.getEntries(),r=n.find((function(e){return s(e.value,t)}));r&&(t=r.value)}i.put(arguments,t)}return t}return l.clearCache=function(){return i.clear()},l}function H(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o,c=0,s={memoizeOptions:void 0},u=r.pop();if("object"===typeof u&&(s=u,u=r.pop()),"function"!==typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var i=s,l=i.memoizeOptions,d=void 0===l?n:l,f=Array.isArray(d)?d:[d],p=H(r),h=e.apply(void 0,[function(){return c++,u.apply(null,arguments)}].concat(f)),m=e((function(){for(var e=[],t=p.length,n=0;n<t;n++)e.push(p[n].apply(null,arguments));return o=h.apply(null,e)}));return Object.assign(m,{resultFunc:u,memoizedResultFunc:h,dependencies:p,lastResult:function(){return o},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),m};return a}var G=J(B),V=function(e){return e.contacts.items},X=function(e){return e.contacts.filter},K={getAllContacts:V,getLoadingContacts:function(e){return e.contacts.load},getFilter:X,getFilteredContacts:G([V,X],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}))},Q=(0,u.$j)((function(e){return{contacts:K.getFilteredContacts(e),filter:K.getFilter(e)}}),(function(e){return{addDeleteContact:function(t){return e(z(t))},addFilterResult:function(t){return e(L.Z.filterContact(t.target.value))}}}))((function(e){var t=e.contacts,n=e.filter,r=e.addFilterResult,a=e.addDeleteContact;return(0,f.jsxs)("div",{className:F,children:[(0,f.jsx)("p",{className:P,children:"My contacts"}),(0,f.jsxs)("div",{className:M,children:[(0,f.jsx)("label",{className:D,children:(0,f.jsx)("input",{type:"text",className:O,name:"filter",value:n,placeholder:"Enter name for search",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:r})}),(0,f.jsx)("ul",{children:t.map((function(e){return(0,f.jsxs)("li",{className:U,children:[e.name,": ",e.number,(0,f.jsx)("button",{type:"button",className:T,onClick:function(){return a(e.id)},children:"Delete"})]},e.id)}))}),(0,f.jsxs)("p",{className:q,children:["Total contacts: ",t.length]})]})]})})),W=n(5276),Y=n(643),ee=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={name:"",number:""},e.nameChange=function(t){e.setState({name:t.currentTarget.value})},e.numberChange=function(t){e.setState({number:t.currentTarget.value})},e.formSubmit=function(t){if(t.preventDefault(),e.props.contacts.find((function(t){return t.name.toLowerCase()===e.state.name.toLowerCase()||t.number===e.state.number})))return alert("Error! A contact with the same name/number already exists!");e.props.addContact(e.state.name,e.state.number),e.formReset()},e.formReset=function(){e.setState({name:"",number:""})},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.props.addfetchContacts()}},{key:"componentDidUpdate",value:function(e,t){this.props.state!==e.state&&this.props.addfetchContacts()}},{key:"render",value:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:W.Z.loading,children:this.props.isLoadingContacts&&(0,f.jsx)(Y.g4,{height:"80",width:"80",radius:"9",color:"skyblue",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0})}),(0,f.jsx)("p",{className:W.Z.title,children:"Add new contact"}),(0,f.jsx)("form",{className:W.Z.phonebookForm,onSubmit:this.formSubmit,children:(0,f.jsxs)("div",{className:W.Z.border,children:[(0,f.jsx)("label",{className:W.Z.label,children:(0,f.jsx)("input",{type:"text",className:W.Z.input,name:"name",value:this.state.name,placeholder:"Enter Name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:this.nameChange})}),(0,f.jsx)("label",{className:W.Z.label,children:(0,f.jsx)("input",{type:"tel",className:W.Z.input,name:"number",value:this.state.number,placeholder:"Enter Number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,onChange:this.numberChange})}),(0,f.jsx)("button",{type:"submit",className:W.Z.button,children:"Add contact"})]})})]})}}]),n}(s.Component),te=(0,u.$j)((function(e){return{contacts:K.getAllContacts(e),isLoadingContacts:K.getLoadingContacts(e)}}),(function(e){return{addfetchContacts:function(){return e(R())},addContact:function(t,n){return e(S(t,n))}}}))(ee),ne="ContactsPage_pb__XfZ9R",re=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:ne,children:[(0,f.jsx)(k,{}),(0,f.jsx)(te,{}),(0,f.jsx)(Q,{})]})})}}]),n}(s.Component),ae=re},8166:function(e,t,n){e.exports=n.p+"static/media/default-avatar.e44fc4e22a4ce55fbe43.png"}}]);
//# sourceMappingURL=contacts-page.a05cd4bd.chunk.js.map